# ForgeFlow v2 Environment Configuration
# Copy this file to .env and configure for your environment

# ===========================================
# GITHUB INTEGRATION (Required)
# ===========================================
GITHUB_TOKEN=your_github_personal_access_token_here
GITHUB_OWNER=your-github-username
GITHUB_REPO=your-repository-name

# GitHub API settings
GITHUB_API_URL=https://api.github.com
GITHUB_ENTERPRISE_URL=                          # For GitHub Enterprise (optional)

# ===========================================
# APPLICATION SETTINGS
# ===========================================
NODE_ENV=development                            # development, production, test
PORT=3000                                      # Application port
LOG_LEVEL=info                                 # debug, info, warn, error

# Dashboard settings
DASHBOARD_PORT=3010                            # Web dashboard port
DASHBOARD_AUTH=false                           # Enable dashboard authentication

# ===========================================
# FORGEFLOW CONFIGURATION
# ===========================================

# Execution settings
FF_MAX_CONCURRENT_AGENTS=5                     # Maximum concurrent agents
FF_DEFAULT_TIMEOUT=300000                      # Default agent timeout (5 minutes)
FF_MAX_RETRIES=3                              # Default retry attempts

# Worktree settings
FF_WORKTREE_BASE_PATH=.worktrees              # Base path for worktrees
FF_MAX_WORKTREES=10                           # Maximum concurrent worktrees
FF_CLEANUP_ON_ERROR=true                      # Auto-cleanup failed worktrees

# Quality gates
FF_REQUIRE_TESTS=true                         # Require tests to pass
FF_MIN_COVERAGE=95                            # Minimum test coverage percentage
FF_REQUIRE_LINT=true                          # Require lint checks to pass
FF_PERFORMANCE_THRESHOLD=90                   # Minimum performance score

# ===========================================
# PROTOCOLS CONFIGURATION
# ===========================================

# NLNH Protocol (No Lies, No Hallucination)
NLNH_ENABLED=true                             # Enable NLNH protocol
NLNH_STRICT_MODE=true                         # Strict truth enforcement
NLNH_CONFIDENCE_THRESHOLD=0.8                 # Minimum confidence for claims

# AntiHall Protocol (Anti-Hallucination)
ANTIHALL_ENABLED=true                         # Enable AntiHall protocol
ANTIHALL_CODEBASE_ANALYSIS=true               # Analyze codebase for validation
ANTIHALL_API_VALIDATION=true                  # Validate API endpoints exist
ANTIHALL_REALTIME_CHECKS=true                 # Real-time hallucination checking

# RYR Protocol (Remember Your Rules)
RYR_ENABLED=true                              # Enable RYR protocol
RYR_AUTO_REFRESH=true                         # Auto-refresh rules from files
RYR_CHECK_INTERVAL=300000                     # Check for rule updates (5 minutes)
RYR_RULES_PATH=.                              # Path to rules files

# ===========================================
# SECURITY SETTINGS
# ===========================================

# JWT Configuration (if using authentication)
JWT_SECRET=your_jwt_secret_key_here           # JWT signing secret
JWT_EXPIRES_IN=1h                             # JWT expiration time
JWT_ALGORITHM=HS256                           # JWT algorithm

# API Security
API_RATE_LIMIT=1000                           # Requests per minute
API_CORS_ORIGINS=http://localhost:3000,http://localhost:3010
API_MAX_PAYLOAD_SIZE=10MB                     # Maximum request payload size

# Webhook Security
WEBHOOK_SECRET=your_webhook_secret_here       # GitHub webhook secret
WEBHOOK_PORT=3002                             # Webhook listener port

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Redis (for caching and job queues)
REDIS_URL=redis://localhost:6379             # Redis connection URL
REDIS_PASSWORD=                               # Redis password (if required)
REDIS_DB=0                                    # Redis database number

# PostgreSQL (for persistent data)
DATABASE_URL=postgresql://user:password@localhost:5432/forgeflow
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=forgeflow
DATABASE_USER=forgeflow_user
DATABASE_PASSWORD=your_database_password
DATABASE_SSL=false                            # Enable SSL for database connections

# ===========================================
# MONITORING & OBSERVABILITY
# ===========================================

# Metrics
METRICS_ENABLED=true                          # Enable metrics collection
PROMETHEUS_PORT=9090                          # Prometheus metrics port
METRICS_PATH=/metrics                         # Metrics endpoint path

# Logging
LOG_FORMAT=json                               # Log format: json, text
LOG_FILE=logs/forgeflow.log                   # Log file path
LOG_ROTATION=true                             # Enable log rotation
LOG_MAX_SIZE=100MB                            # Maximum log file size
LOG_MAX_FILES=5                               # Number of rotated files to keep

# Performance monitoring
PERFORMANCE_MONITORING=true                   # Enable performance monitoring
MEMORY_LIMIT=2GB                              # Memory limit for agents
CPU_LIMIT=80                                  # CPU usage limit percentage

# ===========================================
# INTEGRATIONS
# ===========================================

# Slack Integration
SLACK_ENABLED=false                           # Enable Slack notifications
SLACK_WEBHOOK_URL=your_slack_webhook_url      # Slack webhook URL
SLACK_BOT_TOKEN=your_slack_bot_token          # Slack bot token (optional)
SLACK_SUCCESS_CHANNEL=#forgeflow-success      # Success notifications channel
SLACK_FAILURE_CHANNEL=#forgeflow-alerts       # Failure notifications channel
SLACK_SECURITY_CHANNEL=#security-alerts       # Security alerts channel

# Jira Integration
JIRA_ENABLED=false                            # Enable Jira integration
JIRA_SERVER=https://your-company.atlassian.net
JIRA_PROJECT_KEY=FF                           # Jira project key
JIRA_USERNAME=your_jira_username              # Jira username
JIRA_API_TOKEN=your_jira_api_token            # Jira API token

# Email Notifications
EMAIL_ENABLED=false                           # Enable email notifications
SMTP_HOST=smtp.gmail.com                      # SMTP server hostname
SMTP_PORT=587                                 # SMTP server port
SMTP_SECURE=true                              # Use TLS/SSL
SMTP_USER=your_email@gmail.com                # SMTP username
SMTP_PASS=your_email_password                 # SMTP password or app password
EMAIL_FROM=forgeflow@your-company.com         # From email address

# Microsoft Teams Integration
TEAMS_ENABLED=false                           # Enable Teams notifications
TEAMS_WEBHOOK_URL=your_teams_webhook_url      # Teams webhook URL

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================

# Debug settings
DEBUG_MODE=false                              # Enable debug mode
VERBOSE_LOGGING=false                         # Enable verbose logging
DRY_RUN=false                                # Simulate execution without changes

# Demo mode
DEMO_MODE=false                              # Enable demo mode
DEMO_SIMULATE_DELAY=true                     # Add realistic delays in demo
DEMO_GENERATE_FAKE_DATA=true                 # Generate fake data for demo

# Testing
TEST_TIMEOUT=30000                           # Test timeout in milliseconds
TEST_COVERAGE_THRESHOLD=95                   # Test coverage threshold
TEST_PARALLEL=true                           # Run tests in parallel
TEST_WATCH=false                             # Watch mode for tests

# ===========================================
# ADVANCED CONFIGURATION
# ===========================================

# Circuit breaker settings
CIRCUIT_BREAKER_ENABLED=true                 # Enable circuit breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5          # Failures before opening circuit
CIRCUIT_BREAKER_RESET_TIMEOUT=60000          # Reset timeout in milliseconds
CIRCUIT_BREAKER_MONITOR_WINDOW=300000        # Monitoring window in milliseconds

# Retry configuration
RETRY_MAX_ATTEMPTS=3                         # Maximum retry attempts
RETRY_DELAY=5000                             # Initial retry delay
RETRY_BACKOFF=exponential                    # Backoff strategy: exponential, linear, fixed
RETRY_MAX_DELAY=60000                        # Maximum retry delay

# Resource limits
MAX_MEMORY_USAGE=2048                        # Maximum memory usage in MB
MAX_CPU_USAGE=80                             # Maximum CPU usage percentage
MAX_DISK_USAGE=85                            # Maximum disk usage percentage

# Networking
HTTP_TIMEOUT=30000                           # HTTP timeout in milliseconds
HTTP_RETRIES=3                               # HTTP request retries
HTTP_KEEP_ALIVE=true                         # Enable HTTP keep-alive

# ===========================================
# CLOUD PROVIDER SETTINGS (Optional)
# ===========================================

# AWS Configuration
AWS_REGION=us-west-2                         # AWS region
AWS_ACCESS_KEY_ID=your_aws_access_key        # AWS access key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key    # AWS secret key
AWS_S3_BUCKET=forgeflow-artifacts            # S3 bucket for artifacts

# Google Cloud Platform
GCP_PROJECT_ID=your-gcp-project-id           # GCP project ID
GCP_SERVICE_ACCOUNT_KEY=path/to/key.json     # Path to service account key
GCS_BUCKET=forgeflow-artifacts               # GCS bucket for artifacts

# Azure Configuration
AZURE_SUBSCRIPTION_ID=your_azure_subscription_id
AZURE_RESOURCE_GROUP=forgeflow-rg            # Azure resource group
AZURE_STORAGE_ACCOUNT=forgeflowstorage       # Azure storage account

# ===========================================
# FEATURE FLAGS
# ===========================================

# Enable/disable features
FEATURE_PARALLEL_EXECUTION=true              # Enable parallel execution
FEATURE_GITHUB_INTEGRATION=true              # Enable GitHub integration
FEATURE_WORKTREE_MANAGEMENT=true             # Enable worktree management
FEATURE_QUALITY_GATES=true                   # Enable quality gates
FEATURE_SECURITY_SCANNING=true               # Enable security scanning
FEATURE_PERFORMANCE_MONITORING=true          # Enable performance monitoring
FEATURE_FAILURE_RECOVERY=true                # Enable failure recovery
FEATURE_CUSTOM_AGENTS=true                   # Enable custom agents
FEATURE_WEB_DASHBOARD=true                   # Enable web dashboard
FEATURE_API_ENDPOINTS=true                   # Enable API endpoints

# Experimental features (use with caution)
EXPERIMENTAL_AUTO_OPTIMIZATION=false         # Auto-optimize based on metrics
EXPERIMENTAL_ML_TASK_ROUTING=false           # ML-based task routing
EXPERIMENTAL_PREDICTIVE_SCALING=false        # Predictive resource scaling
EXPERIMENTAL_ADVANCED_ANALYTICS=false        # Advanced analytics and reporting

# ===========================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ===========================================

# These settings can be overridden based on NODE_ENV

# Development overrides
DEV_LOG_LEVEL=debug                          # More verbose logging in dev
DEV_DASHBOARD_AUTH=false                     # Disable auth in dev
DEV_MOCK_INTEGRATIONS=true                   # Mock external integrations

# Production overrides
PROD_LOG_LEVEL=warn                          # Less verbose logging in prod
PROD_DASHBOARD_AUTH=true                     # Enable auth in prod
PROD_RATE_LIMIT=500                          # More restrictive rate limiting
PROD_SECURITY_HEADERS=true                   # Enable security headers

# Testing overrides
TEST_LOG_LEVEL=error                         # Minimal logging in tests
TEST_TIMEOUT=10000                           # Shorter timeouts in tests
TEST_PARALLEL_AGENTS=2                       # Fewer agents in test env